<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!----======== CSS ======== -->
  <link rel="stylesheet" href="css/estiloForm.css">

  <!----===== Boxicons CSS ===== -->
  <link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,400i,700,700i&display=swap">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css">


  <!--<title>Dashboard Sidebar Menu</title>-->
</head>

<body>
  <%- include('./barramenu') %>
  <div id="kt_content" class="content d-flex flex-column flex-column-fluid">
    <div class="innerMain_content">
      <div class="container innerMain_container">

        <div class="tab-content" id="myTabContent">
          <div class="tab-pane fade show active" id="list" role="tabpanel" aria-labelledby="list-tab">
            <div class="card">
              <div class="card-header d-flex justify-content-between align-items-center">
                <h1 class="page-title"><i class="bi bi-tools"></i> Lista Mantenimiento</h1>
              </div>
              <div class="card-body">
                <div class="table-responsive">
                  <table id="userList" class="table table-bordered table-hover table-striped">
                    <thead class="thead-light">
                      <tr>
                        <th scope="col">ID</th>
                        <th scope="col">Activo Fijo</th>
                        <th scope="col">Titulo</th>
                        <th scope="col">Descripción</th>
                        <th scope="col">Fecha de Inicio</th>
                        <th scope="col">Responsable</th>
                        <th scope="col">Costo</th>
                        <th scope="col">Estado</th>
                        <th scope="col">Acción</th>
                      </tr>
                    </thead>
                    <tbody>
                      <% for (let i=0; i < mantenimientos.length; i++) { %>
                      <tr>
                        <td scope="row">
                          <%= mantenimientos[i].id %>
                        </td>
                        <td>
                          <%= mantenimientos[i].idaf %>
                        </td>
                        <td>
                          <%= mantenimientos[i].titulo %>
                        </td>
                        <td>
                          <%= mantenimientos[i].descripcion %>
                        </td>
                        <td>
                          <%= new Date(mantenimientos[i].fechainicio).toLocaleDateString() %>
                        </td>
                        <td>
                          <%= mantenimientos[i].responsable %>
                        </td>
                        <td>
                          <%= mantenimientos[i].costo %>
                        </td>
                        <td>
                          <%= mantenimientos[i].idestado %>
                        </td>
                        <td>
                          <div class="table-cell">
                            <form action="/eliminarMantenimiento" method="post">
                              <input type="hidden" name="id" value="<%= mantenimientos[i].id %>">
                              <button>Eliminar</button>
                            </form>
                            <form action="/renderActualizarMantenimiento" method="post">
                              <input type="hidden" name="id" value="<%= mantenimientos[i].id %>">
                              <input type="hidden" name="idaf" value="<%= mantenimientos[i].idaf %>">
                              <input type="hidden" name="titulo" value="<%= mantenimientos[i].titulo %>">
                              <input type="hidden" name="descripcion" value="<%= mantenimientos[i].descripcion %>">
                              <input type="hidden" name="fechainicio" value="<%= mantenimientos[i].fechainicio %>">
                              <input type="hidden" name="responsable" value="<%= mantenimientos[i].responsable %>">
                              <input type="hidden" name="costo" value="<%= mantenimientos[i].costo %>">
                              <input type="hidden" name="idestado" value="<%= mantenimientos[i].idestado %>">
                              <button>Actualizar</button>
                            </form>
                          </div>
                        </td>
                      </tr>
                      <% } %>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>


      </div>
    </div>
  </div>
  </div>

</body>

</html>
